[2024-09-22T11:21:13.829+0000] {local_task_job_runner.py:120} INFO - ::group::Pre task execution logs
[2024-09-22T11:21:14.096+0000] {taskinstance.py:2076} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: example_branch_python_operator_decorator.branching_virtualenv scheduled__2024-09-03T00:00:00+00:00 [queued]>
[2024-09-22T11:21:14.206+0000] {taskinstance.py:2076} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: example_branch_python_operator_decorator.branching_virtualenv scheduled__2024-09-03T00:00:00+00:00 [queued]>
[2024-09-22T11:21:14.206+0000] {taskinstance.py:2306} INFO - Starting attempt 1 of 1
[2024-09-22T11:21:14.642+0000] {taskinstance.py:2330} INFO - Executing <Task(_BranchPythonVirtualenvDecoratedOperator): branching_virtualenv> on 2024-09-03 00:00:00+00:00
[2024-09-22T11:21:14.697+0000] {warnings.py:112} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:62: DeprecationWarning: This process (pid=629) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2024-09-22T11:21:14.707+0000] {standard_task_runner.py:64} INFO - Started process 640 to run task
[2024-09-22T11:21:14.704+0000] {standard_task_runner.py:90} INFO - Running: ['***', 'tasks', 'run', 'example_branch_python_operator_decorator', 'branching_virtualenv', 'scheduled__2024-09-03T00:00:00+00:00', '--job-id', '2585', '--raw', '--subdir', '/home/***/.local/lib/python3.12/site-packages/***/example_dags/example_branch_operator_decorator.py', '--cfg-path', '/tmp/tmpkut9wx_b']
[2024-09-22T11:21:14.726+0000] {standard_task_runner.py:91} INFO - Job 2585: Subtask branching_virtualenv
[2024-09-22T11:21:15.589+0000] {task_command.py:426} INFO - Running <TaskInstance: example_branch_python_operator_decorator.branching_virtualenv scheduled__2024-09-03T00:00:00+00:00 [running]> on host 1d2bd9c1668e
[2024-09-22T11:21:16.774+0000] {taskinstance.py:2648} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='example_branch_python_operator_decorator' AIRFLOW_CTX_TASK_ID='branching_virtualenv' AIRFLOW_CTX_EXECUTION_DATE='2024-09-03T00:00:00+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='scheduled__2024-09-03T00:00:00+00:00'
[2024-09-22T11:21:16.785+0000] {taskinstance.py:430} INFO - ::endgroup::
[2024-09-22T11:21:17.185+0000] {python.py:708} INFO - Python virtual environment will be cached in /tmp/venv-ebe3c33d
[2024-09-22T11:21:17.305+0000] {process_utils.py:183} INFO - Executing cmd: /home/***/.local/bin/python -m virtualenv /tmp/venv-ebe3c33d --system-site-packages --python=python
[2024-09-22T11:21:17.310+0000] {process_utils.py:187} INFO - Output:
[2024-09-22T11:22:11.966+0000] {process_utils.py:191} INFO - created virtual environment CPython3.12.4.final.0-64 in 31632ms
[2024-09-22T11:22:12.701+0000] {process_utils.py:191} INFO -   creator CPython3Posix(dest=/tmp/venv-ebe3c33d, clear=False, no_vcs_ignore=False, global=True)
[2024-09-22T11:22:12.703+0000] {process_utils.py:191} INFO -   seeder FromAppData(download=False, pip=bundle, via=copy, app_data_dir=/home/***/.local/share/virtualenv)
[2024-09-22T11:22:12.704+0000] {process_utils.py:191} INFO -     added seed packages: pip==24.2
[2024-09-22T11:22:12.705+0000] {process_utils.py:191} INFO -   activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator
[2024-09-22T11:22:12.706+0000] {process_utils.py:183} INFO - Executing cmd: /tmp/venv-ebe3c33d/bin/pip install -r /tmp/venv-ebe3c33d/requirements.txt
[2024-09-22T11:22:12.708+0000] {process_utils.py:187} INFO - Output:
[2024-09-22T11:23:08.626+0000] {process_utils.py:191} INFO - Collecting numpy~=1.24.4 (from -r /tmp/venv-ebe3c33d/requirements.txt (line 1))
[2024-09-22T11:23:09.970+0000] {process_utils.py:191} INFO -   Using cached numpy-1.24.4.tar.gz (10.9 MB)
[2024-09-22T11:23:18.294+0000] {process_utils.py:191} INFO -   Installing build dependencies: started
[2024-09-22T11:25:49.630+0000] {process_utils.py:191} INFO -   Installing build dependencies: still running...
[2024-09-22T11:26:00.788+0000] {process_utils.py:191} INFO -   Installing build dependencies: finished with status 'done'
[2024-09-22T11:26:00.790+0000] {process_utils.py:191} INFO -   Getting requirements to build wheel: started
[2024-09-22T11:26:05.218+0000] {process_utils.py:191} INFO -   Getting requirements to build wheel: finished with status 'error'
[2024-09-22T11:26:05.228+0000] {process_utils.py:191} INFO -   error: subprocess-exited-with-error
[2024-09-22T11:26:05.228+0000] {process_utils.py:191} INFO - 
[2024-09-22T11:26:05.229+0000] {process_utils.py:191} INFO -   × Getting requirements to build wheel did not run successfully.
[2024-09-22T11:26:05.229+0000] {process_utils.py:191} INFO -   │ exit code: 1
[2024-09-22T11:26:05.230+0000] {process_utils.py:191} INFO -   ╰─> [33 lines of output]
[2024-09-22T11:26:05.230+0000] {process_utils.py:191} INFO -       Traceback (most recent call last):
[2024-09-22T11:26:05.230+0000] {process_utils.py:191} INFO -         File "/tmp/venv-ebe3c33d/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>
[2024-09-22T11:26:05.231+0000] {process_utils.py:191} INFO -           main()
[2024-09-22T11:26:05.231+0000] {process_utils.py:191} INFO -         File "/tmp/venv-ebe3c33d/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main
[2024-09-22T11:26:05.232+0000] {process_utils.py:191} INFO -           json_out['return_val'] = hook(**hook_input['kwargs'])
[2024-09-22T11:26:05.232+0000] {process_utils.py:191} INFO -                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-09-22T11:26:05.233+0000] {process_utils.py:191} INFO -         File "/tmp/venv-ebe3c33d/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 112, in get_requires_for_build_wheel
[2024-09-22T11:26:05.233+0000] {process_utils.py:191} INFO -           backend = _build_backend()
[2024-09-22T11:26:05.234+0000] {process_utils.py:191} INFO -                     ^^^^^^^^^^^^^^^^
[2024-09-22T11:26:05.234+0000] {process_utils.py:191} INFO -         File "/tmp/venv-ebe3c33d/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 77, in _build_backend
[2024-09-22T11:26:05.235+0000] {process_utils.py:191} INFO -           obj = import_module(mod_path)
[2024-09-22T11:26:05.235+0000] {process_utils.py:191} INFO -                 ^^^^^^^^^^^^^^^^^^^^^^^
[2024-09-22T11:26:05.236+0000] {process_utils.py:191} INFO -         File "/usr/local/lib/python3.12/importlib/__init__.py", line 90, in import_module
[2024-09-22T11:26:05.236+0000] {process_utils.py:191} INFO -           return _bootstrap._gcd_import(name[level:], package, level)
[2024-09-22T11:26:05.237+0000] {process_utils.py:191} INFO -                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-09-22T11:26:05.237+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
[2024-09-22T11:26:05.238+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
[2024-09-22T11:26:05.238+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1310, in _find_and_load_unlocked
[2024-09-22T11:26:05.239+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
[2024-09-22T11:26:05.239+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
[2024-09-22T11:26:05.239+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
[2024-09-22T11:26:05.240+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
[2024-09-22T11:26:05.240+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
[2024-09-22T11:26:05.241+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap_external>", line 995, in exec_module
[2024-09-22T11:26:05.241+0000] {process_utils.py:191} INFO -         File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
[2024-09-22T11:26:05.242+0000] {process_utils.py:191} INFO -         File "/tmp/pip-build-env-3koth142/overlay/lib/python3.12/site-packages/setuptools/__init__.py", line 16, in <module>
[2024-09-22T11:26:05.242+0000] {process_utils.py:191} INFO -           import setuptools.version
[2024-09-22T11:26:05.243+0000] {process_utils.py:191} INFO -         File "/tmp/pip-build-env-3koth142/overlay/lib/python3.12/site-packages/setuptools/version.py", line 1, in <module>
[2024-09-22T11:26:05.243+0000] {process_utils.py:191} INFO -           import pkg_resources
[2024-09-22T11:26:05.244+0000] {process_utils.py:191} INFO -         File "/tmp/pip-build-env-3koth142/overlay/lib/python3.12/site-packages/pkg_resources/__init__.py", line 2172, in <module>
[2024-09-22T11:26:05.244+0000] {process_utils.py:191} INFO -           register_finder(pkgutil.ImpImporter, find_on_path)
[2024-09-22T11:26:05.245+0000] {process_utils.py:191} INFO -                           ^^^^^^^^^^^^^^^^^^^
[2024-09-22T11:26:05.245+0000] {process_utils.py:191} INFO -       AttributeError: module 'pkgutil' has no attribute 'ImpImporter'. Did you mean: 'zipimporter'?
[2024-09-22T11:26:05.245+0000] {process_utils.py:191} INFO -       [end of output]
[2024-09-22T11:26:05.246+0000] {process_utils.py:191} INFO - 
[2024-09-22T11:26:05.246+0000] {process_utils.py:191} INFO -   note: This error originates from a subprocess, and is likely not a problem with pip.
[2024-09-22T11:26:10.386+0000] {process_utils.py:191} INFO - error: subprocess-exited-with-error
[2024-09-22T11:26:10.388+0000] {process_utils.py:191} INFO - 
[2024-09-22T11:26:10.392+0000] {process_utils.py:191} INFO - × Getting requirements to build wheel did not run successfully.
[2024-09-22T11:26:10.394+0000] {process_utils.py:191} INFO - │ exit code: 1
[2024-09-22T11:26:10.402+0000] {process_utils.py:191} INFO - ╰─> See above for output.
[2024-09-22T11:26:10.409+0000] {process_utils.py:191} INFO - 
[2024-09-22T11:26:10.412+0000] {process_utils.py:191} INFO - note: This error originates from a subprocess, and is likely not a problem with pip.
[2024-09-22T11:26:15.855+0000] {taskinstance.py:441} INFO - ::group::Post task execution logs
[2024-09-22T11:26:17.472+0000] {taskinstance.py:2905} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 741, in _ensure_venv_cache_exists
    self._prepare_venv(venv_path)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 669, in _prepare_venv
    prepare_virtualenv(
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/utils/python_virtualenv.py", line 119, in prepare_virtualenv
    execute_in_subprocess(pip_cmd)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/utils/process_utils.py", line 172, in execute_in_subprocess
    execute_in_subprocess_with_kwargs(cmd, cwd=cwd)
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/utils/process_utils.py", line 195, in execute_in_subprocess_with_kwargs
    raise subprocess.CalledProcessError(exit_code, cmd)
subprocess.CalledProcessError: Command '['/tmp/venv-ebe3c33d/bin/pip', 'install', '-r', '/tmp/venv-ebe3c33d/requirements.txt']' returned non-zero exit status 1.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 465, in _execute_task
    result = _execute_callable(context=context, **execute_callable_kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/taskinstance.py", line 432, in _execute_callable
    return execute_callable(context=context, **execute_callable_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 401, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/decorators/base.py", line 265, in execute
    return_value = super().execute(context)
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 401, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 789, in execute
    return self.do_branch(context, super().execute(context))
                                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 401, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 437, in execute
    return super().execute(context=serializable_context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/models/baseoperator.py", line 401, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 235, in execute
    return_value = self.execute_callable()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 751, in execute_callable
    venv_path = self._ensure_venv_cache_exists(Path(self.venv_cache_path))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/airflow/.local/lib/python3.12/site-packages/airflow/operators/python.py", line 745, in _ensure_venv_cache_exists
    raise AirflowException(f"Unable to create new virtual environment in {venv_path}") from e
airflow.exceptions.AirflowException: Unable to create new virtual environment in /tmp/venv-ebe3c33d
[2024-09-22T11:26:19.018+0000] {taskinstance.py:1206} INFO - Marking task as FAILED. dag_id=example_branch_python_operator_decorator, task_id=branching_virtualenv, run_id=scheduled__2024-09-03T00:00:00+00:00, execution_date=20240903T000000, start_date=20240922T112114, end_date=20240922T112619
[2024-09-22T11:26:19.847+0000] {standard_task_runner.py:110} ERROR - Failed to execute job 2585 for task branching_virtualenv (Unable to create new virtual environment in /tmp/venv-ebe3c33d; 640)
[2024-09-22T11:26:20.592+0000] {local_task_job_runner.py:243} INFO - Task exited with return code 1
[2024-09-22T11:26:20.807+0000] {taskinstance.py:3503} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2024-09-22T11:26:21.024+0000] {local_task_job_runner.py:222} INFO - ::endgroup::
